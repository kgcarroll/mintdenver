!function(){"use strict";function e(e,t){for(var n=0;n<e.length;n++)for(var a=0;a<e[n].images.length;a++){var i=new Image;i.src=e[n].images[a].url;var c=new Image;c.src=e[n].images[a].thumb}"undefined"!=typeof t&&t()}function t(){q.on("click",function(){n(1)}),z.on("click",function(){n(-1)}),L.swipe({swipeLeft:function(e){n(1)},swipeRight:function(e){n(-1)},allowPageScroll:"vertical"})}function n(e){var t=I+e,n=v.images.length-1;0>t?t=n:t>n&&(t=0),I=t,b.find("."+y).removeClass(y),b.find("."+j).eq(t).addClass(y)}function a(e){var t=w+e,n=v.images.length-1;0>t?t=n:t>n&&(t=0),w=t,o(v.images[t])}function i(){E.fadeOut()}function c(){var e=$(document.createElement("div")),t=$(document.createElement("div")),n=$(document.createElement("div")),c=$(document.createElement("div")),o=$(document.createElement("img")),d=$(document.createElement("div")),r=$(document.createElement("span")),l=$(document.createElement("button")),u=$(document.createElement("i")),s=$(document.createElement("i")),m=$(document.createElement("button"));e.attr({id:"lightbox-wrapper"}),n.attr({id:"lightbox-container"}),t.attr({id:"lightbox-background"}),c.attr({id:"lightbox"}),d.attr({id:"lightbox-caption"}),r.attr({id:"lightbox-close"}),r.addClass("icon-close"),u.addClass("fa fa-angle-right ease"),s.addClass("fa fa-angle-left ease"),l.attr({id:"lightbox-next"}),m.attr({id:"lightbox-prev"}),l.append(u),m.append(s),o.css("max-height",S),c.append(o,d,l,m,r),n.append(c),e.append(n,t),e.fadeIn(),t.on({click:function(){i()}}),r.on({click:function(){i()}}),l.on({click:function(){a(1)}}),m.on({click:function(){a(-1)}}),E=e,$("body").append(e)}function o(e){"undefined"==typeof E?c():E.not(":visible")&&E.fadeIn(),E.find("img").attr({src:e.url,alt:e.alt}),""!=e.caption?E.find("#lightbox-caption").html(e.caption).show():E.find("#lightbox-caption").hide();var t=E.find("#lightbox-container"),n=($(window).height()-t.height())/2;t.css("top",n)}function d(e,t){var n=($(document.createElement("div")),$(document.createElement("div"))),a=t>0?j:j+" "+y,i=$(document.createElement("img")),c=$(document.createElement("img"));return n.addClass(a),n.data("index",t),i.attr({src:e.url,alt:e.alt}),i.addClass("full-image"),c.attr({src:e.thumb,alt:e.alt}),c.addClass("thumb-image"),n.append(c,i),n.on({click:function(){R||(w=$(this).data("index"),o(e))}}),n}function r(e){var t=$(document.createElement("div"));t.addClass(O+" "+y);for(var n=0;n<e.length;n++){var a=d(e[n],n);t.append(a)}var i=b;b=t,L.append(t),"undefined"!=typeof i&&i.removeClass(y).remove()}function l(e,t){C.find(k).removeClass(y),e.addClass(y),v=t,r(t.images)}function u(e){return e.replace(/\s+/g,"-").toLowerCase()}function s(e,t){var n=$(document.createElement("div")),a=$(document.createElement(k));return t&&l(a,e),n.html(e.category),n.addClass("text"),a.append(n),a.on({click:function(){v.category!=e.category&&(l($(this),e),document.location.hash=u(e.category))}}),a}function m(e){for(var t=!0,n=0;n<e.length;n++){t="undefined"!=typeof p&&p==u(e[n].category)?!0:t;var a=s(e[n],t);C.append(a),t=!1}}function f(){$.ajax({cache:!1,url:templateURL+"/JSON/gallery.json",dataType:"json",success:function(t){x=t;var n=function(){m(x)};e(x,n)}})}function g(){R=$(window).width()<1024}function h(){S=.8*$(window).height(),"undefined"!=typeof E&&E.find("img").css("max-height",S)}var p,v,b,w,x,E,y="active",C=$("#categories"),k="li",I=0,j="image",L=$("#image-container"),O="category-images",R=!1,S=0,q=$("#next-image"),z=$("#prev-image");$(document).ready(function(){g(),h(),f(),t(),document.location.hash.length>0&&(p=document.location.hash.substring(1))}),$(document).keydown(function(e){switch(e.which){case 37:n(-1);break;case 39:n(1);break;default:return}e.preventDefault()}),$(window).on({resize:function(){g(),h()}})}();